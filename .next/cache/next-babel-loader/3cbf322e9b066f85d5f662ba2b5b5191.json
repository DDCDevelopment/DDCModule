{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { fabric } from 'fabric';\nimport { jsPDF } from \"jspdf\";\nimport './style.css';\n\nconst App = () => {\n  const {\n    0: canvas,\n    1: setCanvas\n  } = useState('');\n  useEffect(() => {\n    setCanvas(initCanvas());\n  }, []);\n\n  const initCanvas = () => //Workdesk\n  new fabric.Canvas('canvas', {\n    preserveObjectStacking: true,\n    height: 450,\n    width: 800,\n    backgroundColor: 'pink'\n  });\n\n  const addRect = canvi => {\n    //Button rect\n    console.log('button works!');\n    const rect = new fabric.Rect({\n      height: 280,\n      width: 200,\n      fill: 'yellow'\n    });\n    canvi.add(rect);\n    canvi.renderAll();\n  };\n\n  const deleteObject = function () {\n    //Button delete\n    canvas.getActiveObjects().forEach(obj => {\n      canvas.remove(obj);\n    });\n  };\n\n  const addImage = function () {\n    //Button Image\n    fabric.Image.fromURL(\"/logo-dealer.png\", function (img) {\n      img.crossOrigin = 'anonymous';\n      img.scale(0.05).set({\n        opacity: 1\n      });\n      canvas.add(img);\n      canvas.renderAll();\n    });\n  };\n  /*\n      if (typeof document !== 'undefined') {\n          var user_picture = document.getElementById(\"imgLoader\");\n          user_picture.onchange = function(){\n              var reader = new FileReader();\n              reader.onload = function (event){\n                  var imgObj = new Image();\n                  imgObj.src = event.target.result;\n                  imgObj.onload = function () {\n                      var image = new fabric.Image(imgObj);\n                      canvas.add(image);\n                  }\n              }\n              canvas.renderAll();\n          }\n      }\n  */\n\n\n  if (typeof document !== 'undefined') {\n    document.getElementById('imgLoader').onchange = function handleImage(e) {\n      var reader = new FileReader();\n\n      reader.onload = function (event) {\n        console.log('fdsf');\n        var imgObj = new Image();\n        imgObj.src = event.target.result;\n\n        imgObj.onload = function () {\n          // start fabricJS stuff\n          var image = new fabric.Image(imgObj);\n          /*Simage.set({\n              left: 250,\n              top: 250,\n              angle: 20,\n              padding: 10,\n              cornersize: 10\n          });*/\n          //image.scale(getRandomNum(0.1, 0.25)).setCoords();\n\n          canvas.add(image); // end fabricJS stuff\n        };\n      };\n\n      reader.readAsDataURL(e.target.files[0]);\n    };\n  }\n\n  const changeOpacity = function () {\n    //Button opacity\n    canvas.getActiveObjects().forEach(obj => {\n      if (obj) {\n        let semi_op = obj.opacity == 1 ? 0.5 : 1; //Switch opacity to 0.5 or 1\n\n        obj.set({\n          opacity: semi_op\n        });\n      }\n    });\n    canvas.renderAll();\n  };\n  /* OPACITY */\n\n\n  if (typeof document !== 'undefined') {\n    var slide_opacity = document.getElementById(\"slideOpacity\"); //Get slider element\n\n    var number_opacity = document.getElementById(\"numberOpacity\"); //Get number element\n\n    slide_opacity.oninput = function () {\n      //Opacity slider\n      canvas.getActiveObjects().forEach(obj => {\n        obj.set({\n          opacity: this.value / 100\n        });\n        slide_opacity.value = number_opacity.value = this.value;\n      });\n      canvas.renderAll();\n    };\n\n    number_opacity.oninput = function () {\n      //Opacity number\n      canvas.getActiveObjects().forEach(obj => {\n        obj.set({\n          opacity: this.value / 100\n        });\n        slide_opacity.value = number_opacity.value = this.value;\n      });\n      canvas.renderAll();\n    };\n  }\n\n  const moveTo = option => {\n    canvas.getActiveObjects().forEach(obj => {\n      if (option === 'back') {\n        canvas.sendBackwards(obj);\n      } else {\n        canvas.bringForward(obj);\n      }\n    });\n    canvas.renderAll();\n  };\n\n  const savePDF = function () {\n    var imgData = canvas.toDataURL(\"image/jpeg\", 1.0);\n    var pdf = new jsPDF();\n    pdf.addImage(imgData, 'JPEG', 0, 0);\n    pdf.save(\"download.pdf\");\n  };\n\n  return (//HTML\n    __jsx(\"div\", {\n      id: \"product_perso\"\n    }, __jsx(\"div\", {\n      id: \"test\"\n    }, __jsx(\"h1\", null, \"Fabric.js on React - fabric.Canvas('...')\"), __jsx(\"button\", {\n      onClick: () => addRect(canvas)\n    }, \"Rectangle\"), __jsx(\"button\", {\n      onClick: () => deleteObject()\n    }, \"Delete\"), __jsx(\"button\", {\n      onClick: () => addImage()\n    }, \"Image\"), __jsx(\"button\", {\n      onClick: () => changeOpacity()\n    }, \"Opacity\"), __jsx(\"button\", {\n      onClick: () => moveTo('front')\n    }, \"Up\"), __jsx(\"button\", {\n      onClick: () => moveTo('back')\n    }, \"Down\"), __jsx(\"button\", {\n      onClick: () => savePDF()\n    }, \"Download\"), __jsx(\"input\", {\n      type: \"file\",\n      id: \"imgLoader\"\n    }), __jsx(\"div\", null, \"Opacity :\", __jsx(\"input\", {\n      type: \"range\",\n      min: \"1\",\n      max: \"100\",\n      value: \"100\",\n      class: \"slider\",\n      id: \"slideOpacity\"\n    }), __jsx(\"input\", {\n      type: \"number\",\n      min: \"1\",\n      max: \"100\",\n      class: \"number\",\n      id: \"numberOpacity\"\n    }))), __jsx(\"div\", {\n      id: \"div_canvas\"\n    }, __jsx(\"canvas\", {\n      id: \"canvas\"\n    }), \"                              \"))\n  );\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/Thomas/Documents/developpement/ShopifyModule/pages/fabric.js"],"names":["React","useState","useEffect","fabric","jsPDF","App","canvas","setCanvas","initCanvas","Canvas","preserveObjectStacking","height","width","backgroundColor","addRect","canvi","console","log","rect","Rect","fill","add","renderAll","deleteObject","getActiveObjects","forEach","obj","remove","addImage","Image","fromURL","img","crossOrigin","scale","set","opacity","document","getElementById","onchange","handleImage","e","reader","FileReader","onload","event","imgObj","src","target","result","image","readAsDataURL","files","changeOpacity","semi_op","slide_opacity","number_opacity","oninput","value","moveTo","option","sendBackwards","bringForward","savePDF","imgData","toDataURL","pdf","save"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { fabric } from 'fabric';\nimport { jsPDF } from \"jspdf\";\nimport './style.css';\n\nconst App = () => {\n    const [canvas, setCanvas] = useState('');\n\n    useEffect(() => {\n        setCanvas(initCanvas());\n    }, []);\n\n    const initCanvas = () => (                                  //Workdesk\n        new fabric.Canvas('canvas', {\n            preserveObjectStacking:true,\n            height: 450,\n            width: 800,\n            backgroundColor: 'pink'\n        })\n    )\n\n    const addRect = canvi => {                                  //Button rect\n        console.log('button works!');\n        const rect = new fabric.Rect({\n            height: 280,\n            width: 200,\n            fill: 'yellow'\n        });\n        canvi.add(rect);\n        canvi.renderAll();\n    }\n\n    const deleteObject = function() {                           //Button delete\n        canvas.getActiveObjects().forEach((obj) => {\n            canvas.remove(obj)\n          });\n      }\n\n    const addImage = function() {                               //Button Image\n        fabric.Image.fromURL(\"/logo-dealer.png\",function(img) {\n        img.crossOrigin = 'anonymous';\n        img.scale(0.05).set({opacity: 1});\n        canvas.add(img);\n        canvas.renderAll();\n    });\n    }\n/*\n    if (typeof document !== 'undefined') {\n        var user_picture = document.getElementById(\"imgLoader\");\n        user_picture.onchange = function(){\n            var reader = new FileReader();\n            reader.onload = function (event){\n                var imgObj = new Image();\n                imgObj.src = event.target.result;\n                imgObj.onload = function () {\n                    var image = new fabric.Image(imgObj);\n                    canvas.add(image);\n                }\n            }\n            canvas.renderAll();\n        }\n    }\n*/\n\n    if (typeof document !== 'undefined') {\n        document.getElementById('imgLoader').onchange = function handleImage(e) {\n            var reader = new FileReader();\n            reader.onload = function (event) { console.log('fdsf');\n                var imgObj = new Image();\n                imgObj.src = event.target.result;\n                imgObj.onload = function () {\n                    // start fabricJS stuff\n                    \n                    var image = new fabric.Image(imgObj);\n                    /*Simage.set({\n                        left: 250,\n                        top: 250,\n                        angle: 20,\n                        padding: 10,\n                        cornersize: 10\n                    });*/\n                    //image.scale(getRandomNum(0.1, 0.25)).setCoords();\n                    canvas.add(image);\n                    \n                    // end fabricJS stuff\n                }\n                \n            }\n            reader.readAsDataURL(e.target.files[0]);\n        }\n    }\n\n\n\n\n    const changeOpacity = function() {                          //Button opacity\n        canvas.getActiveObjects().forEach((obj) => {\n            if (obj) {\n            let semi_op = (obj.opacity == 1) ? 0.5 : 1;         //Switch opacity to 0.5 or 1\n            obj.set({opacity : semi_op});\n            }\n        });\n        canvas.renderAll();\n    }\n\n                    /* OPACITY */\n    if (typeof document !== 'undefined') {\n        var slide_opacity = document.getElementById(\"slideOpacity\");        //Get slider element\n        var number_opacity = document.getElementById(\"numberOpacity\");      //Get number element\n\n        slide_opacity.oninput = function(){                     //Opacity slider\n            canvas.getActiveObjects().forEach((obj) => {\n                obj.set({opacity : (this.value / 100)});\n                slide_opacity.value = number_opacity.value = this.value;\n            });\n            canvas.renderAll();\n        };\n\n        number_opacity.oninput = function(){                    //Opacity number\n            canvas.getActiveObjects().forEach((obj) => {\n            obj.set({opacity : this.value / 100});\n            slide_opacity.value = number_opacity.value = this.value;\n            });\n            canvas.renderAll();\n        };\n    }\n\n    const moveTo = option => {\n        canvas.getActiveObjects().forEach((obj) => {\n            if (option === 'back') {\n                canvas.sendBackwards(obj);\n            } else {\n                canvas.bringForward(obj);\n            }\n        });\n        canvas.renderAll();\n    }\n\n    const savePDF = function(){\n        var imgData = canvas.toDataURL(\"image/jpeg\", 1.0);\n        var pdf = new jsPDF();\n\n        pdf.addImage(imgData, 'JPEG', 0, 0);\n        pdf.save(\"download.pdf\");\n    }\n\n\n\n\n    return(                                                     //HTML\n        <div id=\"product_perso\">\n            <div id=\"test\">\n                <h1>Fabric.js on React - fabric.Canvas('...')</h1>\n                <button onClick={() => addRect(canvas)}>Rectangle</button>\n                <button onClick={() => deleteObject()}>Delete</button>\n                <button onClick={() => addImage()}>Image</button>\n                <button onClick={() => changeOpacity()}>Opacity</button>\n                <button onClick={() => moveTo('front')}>Up</button>\n                <button onClick={() => moveTo('back')}>Down</button>\n                <button onClick={() => savePDF()}>Download</button>\n                <input type=\"file\" id=\"imgLoader\"></input>\n                <div>\n                    Opacity : \n                    <input type=\"range\" min=\"1\" max=\"100\" value=\"100\" class=\"slider\" id=\"slideOpacity\"></input>\n                    <input type=\"number\" min=\"1\" max=\"100\" class=\"number\" id='numberOpacity' />\n                </div>\n            </div>\n            <div id=\"div_canvas\">\n                <canvas id=\"canvas\" />                              {/* workdesk */}\n            </div>\n        </div>\n    );\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}